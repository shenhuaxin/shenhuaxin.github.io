<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Git" /><meta name="author" content="渡边" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="常用命令" /><meta property="og:description" content="常用命令" /><link rel="canonical" href="https://shenhuaxin.github.io/posts/git/" /><meta property="og:url" content="https://shenhuaxin.github.io/posts/git/" /><meta property="og:site_name" content="渡边" /><meta property="og:image" content="https://shenhuaxin.github.io/commons/devices-mockup.png" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-10T00:00:00+00:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://shenhuaxin.github.io/commons/devices-mockup.png" /><meta property="twitter:title" content="Git" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@渡边" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"渡边"},"dateModified":"2022-03-17T16:20:41+00:00","datePublished":"2022-01-10T00:00:00+00:00","description":"常用命令","headline":"Git","image":{"width":800,"height":500,"url":"https://shenhuaxin.github.io/commons/devices-mockup.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shenhuaxin.github.io/posts/git/"},"url":"https://shenhuaxin.github.io/posts/git/"}</script><title>Git | 渡边</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="渡边"><meta name="application-name" content="渡边"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/favicons/icon.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">渡边</a></div><div class="site-subtitle font-italic">优哉游哉</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/shenhuaxin" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['shx_jx','163.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Git</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Git</h1><div class="post-meta text-muted"><div> 作者 <em> <a href="https://github.com/shenhuaxin">shenhuaxin</a> </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" data-ts="1641772800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-01-10 </em> </span> <span> 更新于 <em class="timeago" data-ts="1647534041" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-18 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3122 字"> <em>17 分钟</em>阅读</span></div></div></div><div class="post-content"><h2 id="常用命令"><span class="mr-2">常用命令</span><a href="#常用命令" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="table-wrapper"><table><thead><tr><th style="text-align: left">功能<th style="text-align: left">命令<tbody><tr><td style="text-align: left">添加文件/更改到暂存区<td style="text-align: left">git add filename<tr><td style="text-align: left">添加所有文件/更改到暂存区<td style="text-align: left">git add .<tr><td style="text-align: left">提交<td style="text-align: left">git commit -m msg<tr><td style="text-align: left">从远程仓库拉取最新代码<td style="text-align: left">git pull origin master<tr><td style="text-align: left">推送到远程仓库<td style="text-align: left">git push origin master<tr><td style="text-align: left">查看配置信息<td style="text-align: left">git config –list<tr><td style="text-align: left">查看文件列表<td style="text-align: left">git ls-files<tr><td style="text-align: left">比较工作区和暂存区<td style="text-align: left">git diff<tr><td style="text-align: left">比较暂存区和版本库<td style="text-align: left">git diff –cached<tr><td style="text-align: left">比较工作区和版本库<td style="text-align: left">git diff HEAD<tr><td style="text-align: left">从暂存区移除文件<td style="text-align: left">git reset HEAD filename<tr><td style="text-align: left">查看本地远程仓库配置<td style="text-align: left">git remote -v<tr><td style="text-align: left">回滚<td style="text-align: left">git reset –hard 提交SHA<tr><td style="text-align: left">强制推送到远程仓库<td style="text-align: left">git push -f origin master<tr><td style="text-align: left">修改上次 commit<td style="text-align: left">git commit –amend<tr><td style="text-align: left">推送 tags 到远程仓库<td style="text-align: left">git push –tags<tr><td style="text-align: left">推送单个 tag 到远程仓库<td style="text-align: left">git push origin [tagname]<tr><td style="text-align: left">删除远程分支<td style="text-align: left">git push origin –delete [branchName]<tr><td style="text-align: left">远程空分支（等同于删除）<td style="text-align: left">git push origin :[branchName]<tr><td style="text-align: left">查看所有分支历史<td style="text-align: left">gitk –all<tr><td style="text-align: left">按日期排序显示历史<td style="text-align: left">gitk –date-order</table></div><h2 id="qa"><span class="mr-2">Q&amp;A</span><a href="#qa" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="如何解决gitk中文乱码git-ls-files-中文文件名乱码问题"><span class="mr-2">如何解决gitk中文乱码，git ls-files 中文文件名乱码问题？</span><a href="#如何解决gitk中文乱码git-ls-files-中文文件名乱码问题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>在~/.gitconfig中添加如下内容</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>[core]
   quotepath = false
[gui]
   encoding = utf-8
[i18n]
   commitencoding = utf-8
[svn]
   pathnameencoding = utf-8
</pre></table></code></div></div><p>参考 <a href="http://zengrong.net/post/1249.htm">http://zengrong.net/post/1249.htm</a></p><h3 id="如何处理本地有更改需要从服务器合入新代码的情况"><span class="mr-2">如何处理本地有更改需要从服务器合入新代码的情况？</span><a href="#如何处理本地有更改需要从服务器合入新代码的情况" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>git stash
git pull
git stash pop
</pre></table></code></div></div><h3 id="stash"><span class="mr-2">stash</span><a href="#stash" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>查看 stash 列表：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git stash list
</pre></table></code></div></div><p>查看某一次 stash 的改动文件列表（不传最后一个参数默认显示最近一次）：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git stash show "stash@{0}"
</pre></table></code></div></div><p>以 patch 方式显示改动内容</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git stash show -p "stash@{0}"
</pre></table></code></div></div><p>应用某次 stash 改动内容：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git stash apply "stash@{0}"
</pre></table></code></div></div><h3 id="如何合并-fork-的仓库的上游更新"><span class="mr-2">如何合并 fork 的仓库的上游更新？</span><a href="#如何合并-fork-的仓库的上游更新" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>git remote add upstream https://upstream-repo-url
git fetch upstream
git merge upstream/master
</pre></table></code></div></div><h3 id="如何通过-tortoisesvn-带的-tortoisemergeexe-处理-git-产生的-conflict"><span class="mr-2">如何通过 TortoiseSVN 带的 TortoiseMerge.exe 处理 git 产生的 conflict？</span><a href="#如何通过-tortoisesvn-带的-tortoisemergeexe-处理-git-产生的-conflict" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>将 TortoiseMerge.exe 所在路径添加到 <code class="language-plaintext highlighter-rouge">path</code> 环境变量。<li>运行命令 <code class="language-plaintext highlighter-rouge">git config --global merge.tool tortoisemerge</code> 将 TortoiseMerge.exe 设置为默认的 merge tool。<li><p>在产生 conflict 的目录运行 <code class="language-plaintext highlighter-rouge">git mergetool</code>，TortoiseMerge.exe 会跳出来供你 resolve conflict。</p><blockquote><p>也可以运行 <code class="language-plaintext highlighter-rouge">git mergetool -t vimdiff</code> 使用 <code class="language-plaintext highlighter-rouge">-t</code> 参数临时指定一个想要使用的 merge tool。</p></blockquote></ul><h3 id="不想跟踪的文件已经被提交了如何不再跟踪而保留本地文件"><span class="mr-2">不想跟踪的文件已经被提交了，如何不再跟踪而保留本地文件？</span><a href="#不想跟踪的文件已经被提交了如何不再跟踪而保留本地文件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">git rm --cached /path/to/file</code>，然后正常 add 和 commit 即可。</p><h3 id="如何不建立一个没有-parent-的-branch"><span class="mr-2">如何不建立一个没有 parent 的 branch？</span><a href="#如何不建立一个没有-parent-的-branch" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git checkout --orphan newbranch
</pre></table></code></div></div><p>此时 <code class="language-plaintext highlighter-rouge">git branch</code> 是不会显示该 branch 的，直到你做完更改首次 commit。比如你可能会想建立一个空的 gh-pages branch，那么：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>git checkout --orphan gh-pages
git rm -rf .
// add your gh-pages branch files
git add .
git commit -m "init commit"
</pre></table></code></div></div><h3 id="submodule-的常用命令"><span class="mr-2">submodule 的常用命令</span><a href="#submodule-的常用命令" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><strong>添加 submodule</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git submodule add git@github.com:philsquared/Catch.git Catch
</pre></table></code></div></div><p>这会在仓库根目录下生成如下 .gitmodules 文件并 clone 该 submodule 到本地。</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>[submodule "Catch"]
path = Catch
url = git@github.com:philsquared/Catch.git
</pre></table></code></div></div><p><strong>更新 submodule</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git submodule update
</pre></table></code></div></div><p>当 submodule 的 remote 有更新的时候，需要</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git submodule update --remote
</pre></table></code></div></div><p>当在本地拉取了 submodule 的远程更新，但是想反悔时：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git submodule update --init
</pre></table></code></div></div><p><strong>删除 submodule</strong></p><p>在 .gitmodules 中删除对应 submodule 的信息，然后使用如下命令删除子模块所有文件：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git rm --cached Catch
</pre></table></code></div></div><p><strong>clone 仓库时拉取 submodule</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git submodule update --init --recursive
</pre></table></code></div></div><h3 id="删除远程-tag"><span class="mr-2">删除远程 tag</span><a href="#删除远程-tag" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git push origin --delete tag [tagname]
</pre></table></code></div></div><h3 id="基于某次-commit-创建-tag"><span class="mr-2">基于某次 commit 创建 tag</span><a href="#基于某次-commit-创建-tag" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git tag &lt;tag name&gt; &lt;commit id&gt;
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git tag v1.0.0 ef0120
</pre></table></code></div></div><h3 id="清除未跟踪文件"><span class="mr-2">清除未跟踪文件</span><a href="#清除未跟踪文件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clean
</pre></table></code></div></div><p>可选项：</p><div class="table-wrapper"><table><thead><tr><th>选项<th>含义<tbody><tr><td>-q, –quiet<td>不显示删除文件名称<tr><td>-n, –dry-run<td>试运行<tr><td>-f, –force<td>强制删除<tr><td>-i, –interactive<td>交互式删除<tr><td>-d<td>删除文件夹<tr><td>-e, –exclude<pattern></pattern><td>忽略符合<pattern> 的文件</pattern><tr><td>-x<td>清除包括 .gitignore 里忽略的文件<tr><td>-X<td>只清除 .gitignore 里忽略的文件</table></div><h3 id="忽略文件属性更改"><span class="mr-2">忽略文件属性更改</span><a href="#忽略文件属性更改" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>因为临时需求对某个文件 chmod 了一下，结果这个就被记为了更改，有时候这是想要的，有时候这会造成困扰。</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config --global core.filemode false
</pre></table></code></div></div><p>参考：<a href="http://stackoverflow.com/questions/1580596/how-do-i-make-git-ignore-file-mode-chmod-changes">How do I make Git ignore file mode (chmod) changes?</a></p><h3 id="忽略除某后缀名以外的所有文件"><span class="mr-2">忽略除某后缀名以外的所有文件</span><a href="#忽略除某后缀名以外的所有文件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>忽略除了 .c 后缀名以外的所有文件。</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>*
!*.c
!*/
</pre></table></code></div></div><p>gitignore 里，*、?、[] 可用作通配符。</p><h3 id="patch"><span class="mr-2">patch</span><a href="#patch" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>将未添加到暂存区的更改生成 patch 文件：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git diff &gt; demo.patch
</pre></table></code></div></div><p>将已添加到暂存区的更改生成 patch 文件：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git diff --cached &gt; demo.patch
</pre></table></code></div></div><p>合并上面两条命令生成的 patch 文件包含的更改：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git apply demo.patch
</pre></table></code></div></div><p>将从 HEAD 之前的 3 次 commit 生成 3 个 patch 文件：</p><p>（HEAD 可以换成 sha1 码）</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git format-patch -3 HEAD
</pre></table></code></div></div><p>生成 af8e2 与 eaf8e 之间的 commits 的 patch 文件：</p><p>（注意 af8e2 比 eaf8e 早）</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git format-patch af8e2..eaf8e
</pre></table></code></div></div><p>合并 format-patch 命令生成的 patch 文件：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git am 0001-Update.patch
</pre></table></code></div></div><p>与 <code class="language-plaintext highlighter-rouge">git apply</code> 不同，这会直接 add 和 commit。</p><h3 id="只下载最新代码"><span class="mr-2">只下载最新代码</span><a href="#只下载最新代码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clone --depth 1 git://xxxxxx
</pre></table></code></div></div><p>这样 clone 出来的仓库会是一个 shallow 的状态，要让它变成一个完整的版本：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git fetch --unshallow
</pre></table></code></div></div><p>或</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git pull --unshallow
</pre></table></code></div></div><h3 id="基于某次-commit-创建分支"><span class="mr-2">基于某次 commit 创建分支</span><a href="#基于某次-commit-创建分支" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git checkout <span class="nt">-b</span> <span class="nb">test </span>5234ab
</pre></table></code></div></div><p>表示以 commit hash 为 <code class="language-plaintext highlighter-rouge">5234ab</code> 的代码为基础创建分支 <code class="language-plaintext highlighter-rouge">test</code>。</p><h3 id="恢复单个文件到指定版本"><span class="mr-2">恢复单个文件到指定版本</span><a href="#恢复单个文件到指定版本" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git reset 5234ab MainActivity.java
</pre></table></code></div></div><p>恢复 MainActivity.java 文件到 commit hash 为 <code class="language-plaintext highlighter-rouge">5234ab</code> 时的状态。</p><h3 id="设置全局-hooks"><span class="mr-2">设置全局 hooks</span><a href="#设置全局-hooks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config <span class="nt">--global</span> core.hooksPath C:/Users/mazhuang/git-hooks
</pre></table></code></div></div><p>然后把对应的 hooks 文件放在最后一个参数指定的目录即可。</p><p>比如想要设置在 commit 之前如果检测到没有从服务器同步则不允许 commit，那在以上目录下建立文件 pre-commit，内容如下：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>

<span class="nv">CURRENT_BRANCH</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--abbrev-ref</span> HEAD<span class="si">)</span>

git fetch origin <span class="nv">$CURRENT_BRANCH</span>

<span class="nv">HEAD</span><span class="o">=</span><span class="si">$(</span>git rev-parse HEAD<span class="si">)</span>
<span class="nv">FETCH_HEAD</span><span class="o">=</span><span class="si">$(</span>git rev-parse FETCH_HEAD<span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$FETCH_HEAD</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"</span><span class="nv">$HEAD</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Pre-commit check passed"</span>
    <span class="nb">exit </span>0
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"Error: you need to update from remote first"</span>

<span class="nb">exit </span>1
</pre></table></code></div></div><h3 id="查看某次-commit-的修改内容"><span class="mr-2">查看某次 commit 的修改内容</span><a href="#查看某次-commit-的修改内容" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git show &lt;commit-hash-id&gt;
</pre></table></code></div></div><h3 id="查看某个文件的修改历史"><span class="mr-2">查看某个文件的修改历史</span><a href="#查看某个文件的修改历史" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">-p</span> &lt;filename&gt;
</pre></table></code></div></div><h3 id="查看最近两次的修改内容"><span class="mr-2">查看最近两次的修改内容</span><a href="#查看最近两次的修改内容" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">-p</span> <span class="nt">-2</span>
</pre></table></code></div></div><h3 id="应用已存在的某次更改--merge-某一个-commit"><span class="mr-2">应用已存在的某次更改 / merge 某一个 commit</span><a href="#应用已存在的某次更改--merge-某一个-commit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git cherry-pick &lt;commit-hash-id&gt;
</pre></table></code></div></div><p>cherry-pick 有更多详细的用法，可以参见帮助文档。</p><h3 id="命令行自动补全"><span class="mr-2">命令行自动补全</span><a href="#命令行自动补全" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>在 shell 里加载 git-completion 系列脚本，详见 <a href="https://github.com/git/git/tree/master/contrib/completion">https://github.com/git/git/tree/master/contrib/completion</a></p><h3 id="文件每一行变更明细"><span class="mr-2">文件每一行变更明细</span><a href="#文件每一行变更明细" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git blame &lt;filename&gt;
</pre></table></code></div></div><h3 id="找回曾经的历史"><span class="mr-2">找回曾经的历史</span><a href="#找回曾经的历史" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git reflog
</pre></table></code></div></div><p>列出 HEAD 曾指向过的一系列 commit，它们只存在于本机，不是版本仓库的一部分。</p><p>还有：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git fsck
</pre></table></code></div></div><h3 id="记住-https-方式的用户名密码"><span class="mr-2">记住 http(s) 方式的用户名密码</span><a href="#记住-https-方式的用户名密码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>在有些情况下无法使用 git 协议，比如公司的 git 服务器设置了 IP 白名单，只能在公司内网使用 ssh，那么在外面就只能使用 http(s) 上传下载源码了，但每次都手动输入用户名/密码特别惨，于是乎就记住吧。</p><p>设置记住密码（默认 15 分钟）：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config <span class="nt">--global</span> credential.helper cache
</pre></table></code></div></div><p>自定义记住的时间（如下面是一小时）：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config credential.helper <span class="s1">'cache --timeout=3600'</span>
</pre></table></code></div></div><p>长期存储密码：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config <span class="nt">--global</span> credential.helper store
</pre></table></code></div></div><h3 id="git-commit-使用-vim-编辑-commit-message-中文乱码"><span class="mr-2">git commit 使用 vim 编辑 commit message 中文乱码</span><a href="#git-commit-使用-vim-编辑-commit-message-中文乱码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>这个问题在 Windows 下出现了，没找到能完美解决的办法，一种方法是在 vim 打开后输入：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>:set <span class="nv">termencoding</span><span class="o">=</span>GBK
</pre></table></code></div></div><p>这就有点太麻烦了，折衷的方法是改为使用 gVim 或其它你喜欢的编辑器来编辑 commit message：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config <span class="nt">--global</span> core.editor gvim
</pre></table></code></div></div><p>参考：</p><ul><li><a href="https://stackoverflow.com/questions/2596805/how-do-i-make-git-use-the-editor-of-my-choice-for-commits">How do I make Git use the editor of my choice for commits?</a><li><a href="http://www.cnblogs.com/youxin/p/3227961.html">转：git windows中文 乱码问题解决汇总</a></ul><p>另外在升级 Vim 到 8.1 之后，由于 PATH 环境变量里加的还是 vim80 文件夹，导致 git commit 时提示：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>error: cannot spawn gvim: No such file or directory
error: unable to start editor 'gvim'
Please supply the message using either -m or -F option.
</pre></table></code></div></div><p>使用 <code class="language-plaintext highlighter-rouge">which gvim</code> 查看：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>$ which gvim
/usr/bin/which: no gvim in xxxxxxx
</pre></table></code></div></div><p>将 PATH 里添加的 vim80 路径改为 vim81 后解决。</p><h3 id="git-log-中文乱码"><span class="mr-2">git log 中文乱码</span><a href="#git-log-中文乱码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>只在 Windows 下遇到。</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config <span class="nt">--global</span> i18n.logoutputencoding gbk
</pre></table></code></div></div><p>编辑 git 安装目录下 etc/profile 文件，在最后添加如下内容：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>export LESSCHARSET=utf-8
</pre></table></code></div></div><p>参考：<a href="https://segmentfault.com/a/1190000000578037">Git for windows 中文乱码解决方案</a></p><h3 id="git-diff-中文乱码"><span class="mr-2">git diff 中文乱码</span><a href="#git-diff-中文乱码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>只在 Windows 下遇到，目前尚未找到有效办法。</p><h3 id="统计代码行数"><span class="mr-2">统计代码行数</span><a href="#统计代码行数" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>CMD 下直接执行可能失败，可以在右键，Git Bash here 里执行。</p><h4 id="统计某人的代码提交量"><span class="mr-2">统计某人的代码提交量</span><a href="#统计某人的代码提交量" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">--author</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>git config <span class="nt">--get</span> user.name<span class="si">)</span><span class="s2">"</span> <span class="nt">--pretty</span><span class="o">=</span>tformat: <span class="nt">--numstat</span> | gawk <span class="s1">'{ add += $1 ; subs += $2 ; loc += $1 - $2 } END { printf "added lines: %s removed lines : %s total lines: %s\n",add,subs,loc }'</span>
</pre></table></code></div></div><h4 id="仓库提交者排名前-5"><span class="mr-2">仓库提交者排名前 5</span><a href="#仓库提交者排名前-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>如果看全部，去掉 head 管道即可。</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">--pretty</span><span class="o">=</span><span class="s1">'%aN'</span> | <span class="nb">sort</span> | <span class="nb">uniq</span> <span class="nt">-c</span> | <span class="nb">sort</span> <span class="nt">-k1</span> <span class="nt">-n</span> <span class="nt">-r</span> | <span class="nb">head</span> <span class="nt">-n</span> 5
</pre></table></code></div></div><h4 id="仓库提交者邮箱排名前-5"><span class="mr-2">仓库提交者（邮箱）排名前 5</span><a href="#仓库提交者邮箱排名前-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>这个统计可能不太准，可能有同名。</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">--pretty</span><span class="o">=</span>format:%ae | gawk <span class="nt">--</span> <span class="s1">'{ ++c[$0]; } END { for(cc in c) printf "%5d %s\n",c[cc],cc; }'</span> | <span class="nb">sort</span> <span class="nt">-u</span> <span class="nt">-n</span> <span class="nt">-r</span> | <span class="nb">head</span> <span class="nt">-n</span> 5
</pre></table></code></div></div><h4 id="贡献者排名"><span class="mr-2">贡献者排名</span><a href="#贡献者排名" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">--pretty</span><span class="o">=</span><span class="s1">'%aN'</span> | <span class="nb">sort</span> <span class="nt">-u</span> | <span class="nb">wc</span> <span class="nt">-l</span>
</pre></table></code></div></div><h4 id="提交数统计"><span class="mr-2">提交数统计</span><a href="#提交数统计" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log <span class="nt">--oneline</span> | <span class="nb">wc</span> <span class="nt">-l</span>
</pre></table></code></div></div><p>参考：<a href="http://blog.csdn.net/Dwarven/article/details/46550117">Git代码行统计命令集</a></p><h3 id="修改文件名时的大小写问题"><span class="mr-2">修改文件名时的大小写问题</span><a href="#修改文件名时的大小写问题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>修改文件名大小写时，默认会被忽略（在 Windows 下是这样），让 git 对大小写敏感的方法：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config <span class="nt">--global</span> core.ignorecase <span class="nb">false</span>
</pre></table></code></div></div><p>或者使用 <code class="language-plaintext highlighter-rouge">git mv oldname newname</code> 也是可以的。</p><h3 id="修复-gitk-在-macos-下显示模糊的问题"><span class="mr-2">修复 gitk 在 macOS 下显示模糊的问题</span><a href="#修复-gitk-在-macos-下显示模糊的问题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>gitk 很方便，但是在 Mac 系统下默认显示很模糊，影响体验。</p><p>根据网上搜索的结果，解决方法有两种，我采用第一种解决，第二种未尝试。</p><p>方法一：</p><ol><li><p>重新启动机器，按 command + R 等 Logo 和进度条出现，会进入 Recovery 模式，选择顶部的实用工具——终端，运行以下命令：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> csrutil disable
</pre></table></code></div></div><li><p>重新启动机器。</p><li><p>编辑 Wish 程序的 plist，启动高分辨率屏支持。</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> sudo gvim /System/Library/Frameworks/Tk.framework/Versions/Current/Resources/Wish.app/Contents/Info.plist
</pre></table></code></div></div><p>在最后的 &lt;/dict&gt; 前面加上以下代码</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre> &lt;key&gt;NSHighResolutionCapable&lt;/key&gt;
 &lt;<span class="nb">true</span>/&gt;
</pre></table></code></div></div><li><p>更新 Wish.app。</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> <span class="nb">sudo touch </span>Wish.app
</pre></table></code></div></div><li><p>再次用 1 步骤的方法进入 Recovery 模式，执行 <code class="language-plaintext highlighter-rouge">csrutil enable</code> 启动对系统文件保护，再重启即可。</p></ol><p>参考：<a href="http://roshanca.com/2017/make-gitk-retina-in-mac/">Mac 中解决 gitk 模糊问题</a></p><p>方法二：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>brew cask <span class="nb">install </span>retinizer
open /System/Library/Frameworks/Tk.framework/Versions/Current/Resources/
</pre></table></code></div></div><p>打开 retinizer，将 Wish.app 拖到 retinizer 的界面。</p><p>参考：<a href="http://yanhaijing.com/git/2017/02/09/deep-git-4/">起底Git-Git基础</a></p><h3 id="clone-时指定-master-以外的分支"><span class="mr-2">clone 时指定 master 以外的分支</span><a href="#clone-时指定-master-以外的分支" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clone <span class="nt">-b</span> &lt;branch name&gt; <span class="nt">--single-branch</span> &lt;repo address&gt;
</pre></table></code></div></div><h3 id="获取当前分支名称"><span class="mr-2">获取当前分支名称</span><a href="#获取当前分支名称" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git symbolic-ref <span class="nt">--short</span> <span class="nt">-q</span> HEAD
</pre></table></code></div></div><h3 id="解决-no-man-viewer-handled-the-request"><span class="mr-2">解决 no man viewer handled the request</span><a href="#解决-no-man-viewer-handled-the-request" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>运行命令 <code class="language-plaintext highlighter-rouge">git stash --help</code> 报错：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>warning: failed to <span class="nb">exec</span> <span class="s1">'man'</span>: Invalid argument
fatal: no man viewer handled the request
</pre></table></code></div></div><p>原因是 Windows 下没有 man 命令。</p><p>可以修改 git 配置让命令的帮助文档通过浏览器打开。</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git config --global help.format web
</pre></table></code></div></div><h3 id="比较两个分支的差异"><span class="mr-2">比较两个分支的差异</span><a href="#比较两个分支的差异" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>显示出所有差异详情：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git diff &lt;branch_name_1&gt; &lt;branch_name_2&gt;
</pre></table></code></div></div><p>显示有差异的文件列表：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git diff &lt;branch_name_1&gt; &lt;branch_name_2&gt; <span class="nt">--stat</span>
</pre></table></code></div></div><p>显示指定文件的差异详情：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git diff &lt;branch_name_1&gt; &lt;branch_name_2&gt; &lt;filename&gt;
</pre></table></code></div></div><p>查看 A 分支有，B 分支没有的提交：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git log &lt;branch_name_A&gt; ^&lt;branch_name_B&gt;
</pre></table></code></div></div><h3 id="git-操作时报警告"><span class="mr-2">git 操作时报警告</span><a href="#git-操作时报警告" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>警告信息：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@       WARNING: POSSIBLE DNS SPOOFING DETECTED!          @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
The ECDSA host key for gitlab.xxxx.com has changed,
and the key for the corresponding IP address 121.40.151.8
is unknown. This could either mean that
DNS SPOOFING is happening or the IP address for the host
and its host key have changed at the same time.
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ECDSA key sent by the remote host is
SHA256:bud2tDwxl9687vMOUUBGXlwZhjxDTu7eVF43ojAu1Pw.
Please contact your system administrator.
Add correct host key in /c/Users/mzlogin/.ssh/known_hosts to get rid of this message.
Offending ECDSA key in /c/Users/mzlogin/.ssh/known_hosts:1
ECDSA host key for gitlab.xxxx.com has changed and you have requested strict checking.
Host key verification failed.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
</pre></table></code></div></div><p>解决方案：</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>rm ~/.ssh/known_hosts
</pre></table></code></div></div><p>然后重新操作即可。</p><h3 id="删除不存在对应远程分支的本地分支"><span class="mr-2">删除不存在对应远程分支的本地分支</span><a href="#删除不存在对应远程分支的本地分支" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>（本小节有效性存疑，有时候并不好使。）</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">$ </span>git remote show origin
develop                             tracked
master                              tracked
feature/new-ui                      tracked
refs/remotes/origin/feature/test    stale <span class="o">(</span>use <span class="s1">'git remote prune'</span> to remove<span class="o">)</span>
...
</pre></table></code></div></div><p>其中 feature/test 就是不存在远程分支的本地分支。</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>git remote prune origin
</pre></table></code></div></div><p>清除完成。</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/git/'>Git</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/git/" class="post-tag no-text-decoration" >git</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/py4j/">java 调用 python</a><li><a href="/posts/docker-mtu/">docker https 接口访问不通</a><li><a href="/posts/java-hang/">记录一次Java应用Hang住的问题</a><li><a href="/posts/pod-oom/">记录一次K8S Pod OOM的问题</a><li><a href="/posts/good-soft/">值得收藏的软件</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/eureka/">eureka</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/">工作效率</a> <a class="post-tag" href="/tags/apollo/">apollo</a> <a class="post-tag" href="/tags/arthas/">arthas</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/https/">https</a> <a class="post-tag" href="/tags/k8s/">k8s</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/gitmodule/"><div class="card-body"> <em class="timeago small" data-ts="1673481600" > 2023-01-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>使用 git module 集成前后端项目</h3><div class="text-muted small"><p> 需求 最近有个项目需要在流水线中集成前后端项目一起部署 使用流水线部署时，怎么同时拉取前后端项目，避免本地打包前端项目放到后端项目中。 解决 研究后发现使用 gitmodules 特别好处理这个问题。 在后端项目中，使用以下命令将前端项目添加进后端项目的子模块中。 git submodule add https://codeup.aliyun.com/xxxx.git xxxx ...</p></div></div></a></div><div class="card"> <a href="/posts/py4j/"><div class="card-body"> <em class="timeago small" data-ts="1749686400" > 2025-06-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>java 调用 python</h3><div class="text-muted small"><p> 需求 最近碰到 “需要在 java 中执行 python 代码片段” 的需求。调研了几种方案。 Jython 、Py4j 、jep 、pemja 最后选取了 Py4j 方案。 实现方案 java端开发 在 springboot 启动时，创建 GatewayServer，然后将和 python 交互的类保存下来。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ...</p></div></div></a></div><div class="card"> <a href="/posts/arthas-profiler/"><div class="card-body"> <em class="timeago small" data-ts="1741737600" > 2025-03-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>arthas生成火焰图优化性能</h3><div class="text-muted small"><p> 需求 最近碰到一个集合循环，程序执行偏慢的场景，需要进行排查。 代码案例 1 2 3 4 5 6 7 8 public static void main(String[] args) throws InterruptedException { String data = FileUtil.readString(&quot;/Users/test/Downloads/测试.js...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="上一篇"><p>-</p></span> <a href="/posts/good-soft/" class="btn btn-outline-primary" prompt="下一篇"><p>值得收藏的软件</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/shenhuaxin">shenhuaxin</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/eureka/">eureka</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/">工作效率</a> <a class="post-tag" href="/tags/apollo/">apollo</a> <a class="post-tag" href="/tags/arthas/">arthas</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/https/">https</a> <a class="post-tag" href="/tags/k8s/">k8s</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
